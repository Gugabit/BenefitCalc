<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Calculadora Beneficio</title>
</head>
<body>
    <div class=" d-flex justify-content-center w-100 flex-wrap p-2">
        <div class="wrapper d-flex justify-content-center mt-4 w-100">
            <div class="d-flex flex-column h-100 justify-content-center">
                <h2 class="align-self-center">Calculadora de Beneficio</h2>
                <h5 class="align-self-center">Preencha os campos abaixo com os valores recebidos nos ultimos três meses:</h5>
                <h6 class="align-self-center">Favor não inserir ponto para indicar milhar.</h6>
                <label for="valorEntrada3">Mês Um</label>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">R$</span>
                    </div>
                    <input type="text" class="form-control" id="valorEntrada1" onkeyup="keyUpTest()"> <!-- Entrada -->
                </div>
                <label for="valorEntrada3">Mês Dois</label>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">R$</span>
                    </div>
                    <input type="text" class="form-control" id="valorEntrada2"> <!-- Entrada -->
                </div>
                <label for="valorEntrada3">Mês Três</label>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">R$</span>
                    </div>
                    <input type="text" class="form-control" id="valorEntrada3"> <!-- Entrada -->
                </div>
                <span id="errorBox" class="ml-5 m-0 p-0 d-block text-danger"></span>
                <label class="btn btn-primary mt-5 align-self-center" id="submitBtn" onclick="calcula()">Calcular</label>
                <div class="d-flex flex-wrap justify-content-center align-self-center">
                    <div class="d-flex flex-column m-1">
                        <span class="ml-2" >Média</span>
                        <div class="input-group mb-2" style="width: 150px;">
                            <div class="input-group-prepend">
                                <span class="input-group-text">R$</span>
                            </div>
                            <input type="text" class="form-control" disabled id="salarioMedia">
                        </div>
                    </div>
                    <div class="d-flex flex-column m-1">
                        <span class="ml-2" >Beneficio</span>
                        <div class="input-group mb-2" style="width: 150px;">
                            <div class="input-group-prepend">
                                <span class="input-group-text">R$</span>
                            </div>
                            <input type="text" class="form-control" disabled id="salarioBeneficio">
                        </div>
                    </div>
                    <div class="d-flex flex-column m-1">
                        <span class="ml-2" >União</span>
                        <div class="input-group mb-2" style="width: 150px;">
                            <div class="input-group-prepend">
                                <span class="input-group-text">R$</span>
                            </div>
                            <input type="text" class="form-control" disabled id="salarioUniao">
                        </div>
                    </div>
                    <div class="d-flex flex-column m-1">
                        <span class="ml-2" >Empresa</span>
                        <div class="input-group mb-2" style="width: 150px;">
                            <div class="input-group-prepend">
                                <span class="input-group-text">R$</span>
                            </div>
                            <input type="text" class="form-control" disabled id="salarioEmpresa">
                        </div>
                    </div>
                    <div class="d-flex flex-column m-1">
                        <span class="ml-2" >Total</span>
                        <div class="input-group mb-2" style="width: 150px;">
                            <div class="input-group-prepend">
                                <span class="input-group-text">R$</span>
                            </div>
                            <input type="text" class="form-control" disabled id="salarioTotal">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer d-flex justify-content-between p-4 text-light" style="background-color:dimgrey;">
        <span>Larissa Meriely G. Jorge</span>
        <span>Por <a href="http://gugabit.com" target="_blank">Gustavo B.</a></span>
    </div>
    <div class="d-flex flex-column h-100 justify-content-center m-3">
        <h2 class="align-self-center">Detalhamento do cálculo</h2>
        <div id="detalhamento" class="text-center text-monospace">Efetue um cálculo para visualizar o detalhamento.</div>
    </div>






    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>

<script>
    
    campoEntrada1 = document.getElementById("valorEntrada1")
    campoEntrada2 = document.getElementById("valorEntrada2")
    campoEntrada3 = document.getElementById("valorEntrada3")

    campoEntrada1.addEventListener("keyup", function(event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            calcula()
        }
    })

    campoEntrada2.addEventListener("keyup", function(event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            calcula()
        }
    })

    campoEntrada3.addEventListener("keyup", function(event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            calcula()
        }
    })

    function calcula () {
        salarioEntrada1 = campoEntrada1.value.replace(/,/g, '.')
        salarioEntrada2 = campoEntrada2.value.replace(/,/g, '.')
        salarioEntrada3 = campoEntrada3.value.replace(/,/g, '.')


        if(salarioEntrada1 === '' || salarioEntrada2 === '' || salarioEntrada3 === ''){
            document.getElementById("errorBox").innerHTML = '<b>Obrigatório informar os três valores de entrada.</b> '
            return
        }
        document.getElementById("errorBox").innerHTML = ''

        somaValores = (salarioEntrada1 * 1) + (salarioEntrada2 * 1)  + (salarioEntrada3 * 1)
        salarioMedia = somaValores / 3
        
        if (salarioMedia > 0 && salarioMedia < 1599.62) {
            salarioBeneficio = salarioMedia * 0.8
            contaSalarioBeneficio = `Valor Benefício = ${salarioMedia.toFixed(2)} * 0.8 = ${salarioBeneficio.toFixed(2)}`
            if( salarioBeneficio < 1045){
                salarioBeneficio = 1045
                contaSalarioBeneficio += `<br>Valor menor que R$ 1045.00, portanto Benefício = R$ 1045.00`
            }
        }

        else if (salarioMedia >= 1599.62 && salarioMedia <= 2666.29) {
            salarioBeneficio = (((salarioMedia - 1599.61) * 0.5) + 1279.69)
            contaSalarioBeneficio = `<br>Valor Benefício = (${salarioMedia.toFixed(2)} - 1599.61) * 0.5 + 1279.69 = ${salarioBeneficio.toFixed(2)}`
        }

        else if (salarioMedia > 2666.29) {
            salarioBeneficio = 1813.03
            contaSalarioBeneficio = `Média maior que R$ 2666.29, portanto Benefício = R$ 1813.03`
        }
        
        else {
            document.getElementById("errorBox").innerHTML = '<b>O valor informado é inválido. Valores negativos ou com ponto não são aceitos.</b> '
            return
        }

        salarioUniao = 0.7 * salarioBeneficio
        salarioEmpresa = 0.3 * salarioMedia
        salarioTotal = salarioEmpresa + salarioUniao

        document.getElementById("salarioMedia").value = salarioMedia.toFixed(2)
        document.getElementById("salarioBeneficio").value = salarioBeneficio.toFixed(2)
        document.getElementById("salarioUniao").value = salarioUniao.toFixed(2)
        document.getElementById("salarioEmpresa").value = salarioEmpresa.toFixed(2)
        document.getElementById("salarioTotal").value =  salarioTotal.toFixed(2)

        document.getElementById("detalhamento").innerHTML = ` <br>
            <span class="m-3 d-block"> Soma dos valores = ${salarioEntrada1} + ${salarioEntrada2}  + ${salarioEntrada3} = ${somaValores.toFixed(2)} <br> </span>
            <span class="m-3 d-block"> Média = ${somaValores.toFixed(2)} / 3 = ${salarioMedia.toFixed(2)}<br> </span>
            <span class="m-3 d-block"> ${contaSalarioBeneficio} <br> </span>
            <span class="m-3 d-block"> União = ${salarioBeneficio.toFixed(2)} * 0.7 = ${salarioUniao.toFixed(2)} <br> </span>
            <span class="m-3 d-block"> Empresa = ${salarioMedia.toFixed(2)} * 0.3 = ${salarioEmpresa.toFixed(2)} <br> </span>
            <span class="m-3 d-block"> Total = ${salarioUniao.toFixed(2)} + ${salarioEmpresa.toFixed(2)} = ${salarioTotal.toFixed(2)} <br> </span>
       `
    }

</script>

<style>
    a {
        color:lawngreen;
    }

    .wrapper{
        width: 100%;
        max-width: 800px;
    }
</style>